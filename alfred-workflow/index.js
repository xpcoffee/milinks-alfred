var h=Object.create;var u=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var F=(r,t)=>{for(var i in t)u(r,i,{get:t[i],enumerable:!0})},p=(r,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of N(t))!g.call(r,e)&&e!==i&&u(r,e,{get:()=>t[e],enumerable:!(n=k(t,e))||n.enumerable});return r};var l=(r,t,i)=>(i=r!=null?h(d(r)):{},p(t||!r||!r.__esModule?u(i,"default",{value:r,enumerable:!0}):i,r)),G=r=>p(u({},"__esModule",{value:!0}),r);var b={};F(b,{script:()=>S});module.exports=G(b);var a=l(require("fuzzy-search")),m=require("fs"),L=l(require("path")),f=require("os");function S(){let r=process.env.MILINKS_FILE_PATH,[t,i,n]=process.argv,e=y(r),s=M(e),c=W(s,n),o=O(c);console.log(JSON.stringify(o))}function W(r,t){return new a.default(r,["description","title","url","groupName"]).search(t)}function y(r){r||(console.error("No MiLinks file path."),process.exit(1));try{let t=(0,m.readFileSync)(I(r),"utf-8");return JSON.parse(t)}catch(t){console.error("Unable to parse link file into JSON: "+t),process.exit(1)}}function I(r){return r[0]==="~"?L.default.join((0,f.homedir)(),r.slice(1)):r}function M(r){let t=[];function i(n,e,s){if("items"in e){console.error({groupName:s});let c=[s,e.name].filter(o=>o!==void 0&&(o==null?void 0:o.length)).join("/");e.items.forEach(o=>i(n,o,c))}else n.push({...e,groupName:s})}return i(t,r),t}function O(r){function t(i){let n=[i.groupName,i.description,i.url].filter(e=>e!==void 0&&(e==null?void 0:e.length)).join(" | ");return{uid:i.title,title:i.title,subtitle:n,arg:i.url,variables:{url:i.url}}}return{items:r.map(t)}}0&&(module.exports={script});
