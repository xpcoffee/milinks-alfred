var h=Object.create;var u=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var F=(t,r)=>{for(var i in r)u(t,i,{get:r[i],enumerable:!0})},p=(t,r,i,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of N(r))!g.call(t,e)&&e!==i&&u(t,e,{get:()=>r[e],enumerable:!(n=k(r,e))||n.enumerable});return t};var a=(t,r,i)=>(i=t!=null?h(d(t)):{},p(r||!t||!t.__esModule?u(i,"default",{value:t,enumerable:!0}):i,t)),G=t=>p(u({},"__esModule",{value:!0}),t);var b={};F(b,{script:()=>S});module.exports=G(b);var l=a(require("fuzzy-search")),m=require("fs"),f=a(require("path")),L=require("os");function S(){let t=process.env.MILINKS_FILE_PATH,[r,i,n]=process.argv,e=y(t),s=M(e),c=W(s,n),o=O(c);console.log(JSON.stringify(o))}function W(t,r){if(!r)return t;let i=r.split(" "),n=t;return i.forEach(e=>{n=new l.default(n,["description","title","groupName"]).search(e)}),n}function y(t){t||(console.error("No MiLinks file path."),process.exit(1));try{let r=(0,m.readFileSync)(I(t),"utf-8");return JSON.parse(r)}catch(r){console.error("Unable to parse link file into JSON: "+r),process.exit(1)}}function I(t){return t[0]==="~"?f.default.join((0,L.homedir)(),t.slice(1)):t}function M(t){let r=[];function i(n,e,s){if("items"in e){let c=[s,e.name].filter(o=>o!==void 0&&(o==null?void 0:o.length)).join("/");e.items.forEach(o=>i(n,o,c))}else n.push({...e,groupName:s})}return i(r,t),r}function O(t){function r(i){let n=[i.groupName,i.description,i.url].filter(e=>e!==void 0&&(e==null?void 0:e.length)).join(" | ");return{uid:i.title,title:i.title,subtitle:n,arg:i.url,variables:{url:i.url}}}return{items:t.map(r)}}0&&(module.exports={script});
